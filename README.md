# weather_compare

/*----------- FRONTEND ------------*/

    Запросы:
*1. testCalculate    - проверка подсчета ошибки прогноза за день
*2. count            - подсчет кол-ва записей в БД
*3. insert           - запуск парсинга данных и отправки в БД
 4. select           - получить все данные из БД
 5. remove           = очистить БД

/*----------- FRONTEND ------------*/



/*----------- NODE ------------*/

1. TIMER - запускает 5-ти минутный интервал, который каждый час запускает
    WEATHER, а каждый день - CALCULATE
2. WEATHER  - берет данные из manifest, посылает запросы к сайтам, парсит данные и отправляет в БД
    с метками NOW/DAY/DESTINY
3. CALCULATE - забирает данные DAY и DESTINY, усредняет за день и записывает в БД
    с меткой DEVIATION, считает отклонение каждого источника и
    записывает меткой MAINDEVIATION
4. SELECTALL - запрашивает все нужные данные, подставляет к прогнозу отклонение
    и отправляет во фронтенд
5. REQUESTDATA - расчет запросов в БД для различных случаев

/*----------- NODE ------------*/



/*----------- MONGO ------------*/

    Типы полей
1. name         - Название сервиса (yandex, gismeteo)
2. key		    - Ключ в манифесте (temp, text)
3. daykey	    -
    a)  now             - актуальные данные за час
    b)  day             - прогнозируемые данные от сегодня на какой-либо другой день
    c)  forecast        - устар.
    d)  destiny         - прогнозируемые данные с какого-либо дня на сегодня каждый час
    e)  deviation       - прогнозируемые данные с какого-либо дня на сегодня за день
    f)  maindeviation   - отклонение для всех данных на каждый afterday
4. afterday	    - На сколько дней прогноз (0,1,2....)
5. value	    -  Значение (10, облачно)
6. year
7. month
8. day
9. hour
10. timestamp
11. deviance    - отклонение прогноза от реальных значений
12. count       - кол-во посчитанных значений для maindeviation

/*----------- MONGO ------------*/